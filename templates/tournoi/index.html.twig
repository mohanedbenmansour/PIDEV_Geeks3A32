{% extends 'base.html.twig' %}

{% block title %}Tournoi{% endblock %}

{% block body %}
    <style>
        * {
            font-family: "Roboto";
            list-style: none;
            margin: 0;
            padding: 0;
            text-decoration: none;
            letter-spacing: 1px;
            box-sizing: border-box;
        }
        body {
            background: #f9fafa;
            padding: 20px;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            justify-content: center;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
        }
        .block {
            margin: 20px;
            border-radius: 4px;
            width: 280px;
            min-height: 430px;
            background: #fff;
            padding: 23px;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            -ms-flex-direction: column;
            flex-direction: column;
            box-shadow: 0 2px 55px rgba(0,0,0,0.1);
        }
        .top {
            border-bottom: 1px solid #e5e5e5;
            padding-bottom: 10px;
        }
        .top ul {
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-pack: justify;
            -ms-flex-pack: justify;
            justify-content: space-between;
        }
        .top a {
            color: #9e9e9e;
        }
        .top a:hover {
            color: #c7ccdb;
        }
        .converse {
            padding: 2px 10px;
            border-radius: 20px;
            text-transform: uppercase;
            font-size: 14px;
        }
        .middle {
            margin-bottom: 40px;
        }
        .middle img {
            width: 100%;
        }
        .bottom {
            text-align: center;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            -ms-flex-direction: column;
            flex-direction: column;
            -webkit-box-pack: justify;
            -ms-flex-pack: justify;
            justify-content: space-between;
            -webkit-box-flex: 1;
            -ms-flex-positive: 1;
            flex-grow: 1;
        }
        .heading {
            font-size: 17px;
            text-transform: uppercase;
            margin-bottom: 5px;
            letter-spacing: 0;
        }
        .info {
            font-size: 14px;
            color: #969696;
            margin-bottom: 10px;
        }
        .style {
            font-size: 16px;
            margin-bottom: 20px;
        }
        .old-price {
            color: #f00;
            text-decoration: line-through;
        }
        h1{
            font-size:70px;
        }

    </style>
    <div class="container text-center">
<h1><strong class="text-danger">Tournoi</strong></h1>
    </div>
    <input type="text" id="search" name="search" class="form-control"

           placeholder="Search">
    <table class="table" id="t">
        <thead>
            <tr>

                <th>Nom</th>
                <th>Description</th>
                <th>Type du tournoi</th>
                <th>Nombre de Participants</th>
                <th>Adresse</th>
                <th>Image</th>
                <th>Date du tournoi</th>
                <th>Date de publication</th>

            </tr>
        </thead>
        <tbody id="all">
        {% for tournoi in tournois %}
            <tr>

                <td>{{ tournoi.Nom }}</td>
                <td>{{ tournoi.description }}</td>
                <td>{{ tournoi.category }}</td>
                <td>{{ tournoi.Nbmax}}</td>
                <td>{{ tournoi.adresse }}</td>
                <div class="middle">
                <td><a href="{{ path('tournoi_show', {'id': tournoi.id}) }}"><img src="/uploads/{{ tournoi.image }}" alt="{{ tournoi.image }}" width="100" height="100"></a></td>
                </div>
                <td>{{ tournoi.dateTournoi ? tournoi.dateTournoi|date('Y-m-d') : '' }}</td>
                <td>{{ tournoi.datePublication ? tournoi.datePublication|date('Y-m-d') : '' }}</td>

            </tr>
        {% else %}
            <tr>
                <td colspan="8">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
        <tbody id="search">
        </tbody>
    </table>

    <a href="{{ path('tournoi_new') }}">Create new</a>


<script
        src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
</script>
<script>
    $( document ).ready(function() {
        $("#search").keyup(function(e){
            var value = $(this).val();
            $.ajax({
                url : "{{ path('tournoi_index') }}",
                type : 'GET',
                data: {
                    'searchValue' : value
                },
                success : function(retour){
                    if(retour){
                        $('#t tbody#search').empty();
                        $.each(JSON.parse(retour), function(i, obj) {
                            $('#t tbody#all').hide();
   $('#t tbody#search').append('<tr><td> '+obj.id+' </td><td> '+obj.nom+' </td><td>'+obj.adresse+' </td><td>' +
       '<ahref="tournoi_edit/'+obj.id+'">modifier</a> </br>' +
       '<ahref="tournoi_edit/'+obj.id+'">supprimer</a></td></tr>');
                        });

                    }
                    else
                    {

                        $('#t tbody#all').show();
                        $('#t tbody#search').empty();
                        $('#t tbody#search').fadeIn('fast');

                    }

                },
            });
            return false;
        });
    });
</script>
{% endblock %}